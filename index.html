<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js"></script>
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
	<script src="static/js/app.js"></script>
	<script src="static/js/lib/markdown-js.js"></script>
	<script src="static/js/lib/json2.min.js"></script>
	<script src="static/js/lib/md5.js"></script>
	<script src="static/js/lib/gravtastic.js"></script>

	<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
	<link href="static/css/flat-ui.css" rel="stylesheet">
	<!--<link href="static/css/cosmo.bootstrap.min.css" rel="stylesheet">-->
	<link href="static/css/app.css" rel="stylesheet">
</head>

<body ng-app="cvitae" ng-controller="CvitaeCtrl">
	<!--<div class="navbar navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
				<a class="brand" href="#">cvitae</a>

				<form class="navbar-form pull-right">
					<button type="submit" class="btn">Guardar</button>
				</form>
			</div>
		</div>
	</div>-->

	<div id="menu-bar" class="navbar navbar-inverse navbar-fixed-top">
	<div class="navbar-inner">
	<div class="container">
		<div class="row-fluid">
			<div class="span6">
				<h3 id="brand">cvitae</h3>
			</div>
			<div class="span6 button-wrapper align-right-not-stacked">
				<button type="submit" class="btn btn-large btn-primary" ng-show="editMode" ng-click="save()">Guardar</button><button type="button" class="btn btn-large btn-info" ng-click="editMode = !editMode" ng-show="editMode"><i class="icon-search icon-white"></i> Vista previa</button><button class="btn btn-large btn-info" ng-click="editMode = !editMode" ng-show="!editMode"><i class="icon-pencil icon-white"></i> Vista de edición</button>
			</div>
		</div>
	</div>
	</div>
	</div>

	<div class="container">
		<form id="editor" class="form-horizontal dialog-closeable" ng-show="editMode" ng-submit="save()">
			<fieldset>
				<legend>Información personal</legend>

				<div class="control-group">
					<label class="control-label" for="first-name-input">Nombre</label>
					<div class="controls">
						<input type="text" class="input-xlarge" name="first-name" id="first-name-input" ng-model="cvitae.personal.firstName" required="required">
					</div>
				</div>

				<div class="control-group">
					<label class="control-label" for="last-name-input">Apellido</label>
					<div class="controls">
						<input type="text" class="input-xlarge" name="last-name" id="last-name-input" ng-model="cvitae.personal.lastName" required="required">
					</div>
				</div>

				<div class="control-group">
					<label class="control-label" for="date-of-birth-input">Fecha de nacimiento</label>
					<div class="controls">
						<input type="text" class="input-medium" name="date-of-birth" name="date-of-birth-input" ng-model="cvitae.personal.dateOfBirth" required="required">
					</div>
				</div>

				<div class="control-group">
					<label class="control-label" for="email-input">Correo electrónico</label>
					<div class="controls">
						<input type="email" class="input-xlarge" name="email" name="email-input" ng-model="cvitae.personal.email" required="required">
						<span class="help-inline">Utilizaremos <a href="http://gravatar.com">Gravatar</a> para desplegar tu avatar. Si aún no tienes uno, <a ng-href="http://gravatar.com/site/signup">¡obtenlo ahora!</a></span>
					</div>
				</div>

				<div class="control-group">
					<label class="control-label" for="address-input">Dirección</label>
					<div class="controls">
						<input type="text" class="input-xxlarge" placeholder="Calle, número interior y/o exterior, colonia, código postal" name="address" id="address-input" ng-model="cvitae.personal.address">
					</div>
				</div>

				<div class="control-group">
					<label class="control-label" for="district-input">Delegación</label>
					<div class="controls">
						<select ng-options="key as value.label for (key, value) in catalogs.boroughs" ng-model="cvitae.personal.borough"></select>
					</div>
				</div>

				<div class="control-group">
					<label class="control-label" for="state-input">Estado</label>
					<div class="controls">
						<select ng-options="key as value.label for (key, value) in catalogs.states" ng-model="cvitae.personal.state"></select>
					</div>
				</div>

				<div class="control-group" ng-controller="PhoneCtrl">
					<label class="control-label" for="state-input">Teléfono</label>
					<div class="controls list-wrapper">
						<div class="list-items palette-clouds" ng-show="cvitae.personal.phones.length">
							<div ng-repeat="phone in cvitae.personal.phones" class="list-item clearfix">
								<button class="btn btn-danger pull-right close-button" type="button" ng-click="remove(phone.id)"><i class="icon-remove icon-white"></i></button>
								<div>
									<input type="text" ng-model="phone.number">
									<select ng-options="key as value.label for (key, value) in catalogs.phoneTypes" ng-model="phone.type"></select>
								</div>
							</div>
						</div>
						<button class="btn btn-primary btn-block list-action" ng-class="{'list-empty': !cvitae.personal.phones.length}" type="button" ng-click="add()"><i class="icon-plus icon-white"></i> Teléfono</button>
					</div>
				</div>
			</fieldset>

			<fieldset ng-controller="EducationCtrl">
				<legend>Formación académica</legend>

				<div class="education-wrapper list-wrapper">
					<div class="list-items palette-clouds" ng-show="cvitae.education.length">
						<div ng-repeat="education in cvitae.education" class="list-item">
							<button class="btn btn-danger pull-right close-button" type="button" ng-click="remove(education.id)"><i class="icon-remove icon-white"></i></button>

							<div class="control-group">
								<label class="control-label" for="education-institution-{{education.id}}-input">Institución</label>
								<div class="controls">
									<input type="text" class="input-xxlarge" ng-model="education.institution" id="education-institution-{{education.id}}-input" required="required">
									<button type="button" class="btn" ng-show="education.school == null" ng-click="addSchool(education.id)"><i class="icon-plus icon-white"></i> Escuela</button>
								</div>
							</div>

							<div class="control-group" ng-show="education.school != null">
								<label class="control-label" for="education-school-{{education.id}}-input">Escuela</label>
								<div class="controls">
									<input type="text" class="input-xxlarge" ng-model="education.school" id="education-school-{{education.id}}-input">
								</div>
							</div>

							<div class="control-group">
								<label class="control-label" for="education-start-date-{{education.id}}-input">Periodo</label>
								<div class="controls">
									<input type="text" class="input-small" ng-model="education.startDate" id="education-start-date-{{education.id}}-input" required="required" placeholder="Inicio" pattern="(1|2)[0-9]{3}" title="Año (cuatro dígitos)">
									<button type="button" class="btn" ng-show="education.endDate == null" ng-click="addEndDate(education.id)"><i class="icon-plus icon-white"></i> Fin</button>
									<span ng-show="education.endDate != null">-</span>
									<input type="text" class="input-small" ng-model="education.endDate" ng-show="education.endDate != null" placeholder="Fin" pattern="(1|2)[0-9]{3}" title="Año (cuatro dígitos)">

									<label class="checkboxx"><input type="checkbox" ng-model="employment.current"> Actual</label>
								</div>
							</div>

							<div class="control-group">
								<label class="control-label" for="education-degree-{{education.id}}-input">Título</label>
								<div class="controls">
									<input type="text" class="input-xxlarge" ng-model="education.degree" id="education-degree-{{education.id}}-input" required="required">
								</div>
							</div>
						</div>
					</div>

					<button class="btn btn-primary btn-block list-action" ng-class="{'list-empty': !cvitae.education.length}" type="button" ng-click="add()"><i class="icon-plus icon-white"></i> Institución</button>
				</div>
			</fieldset>

			<fieldset ng-controller="EmploymentCtrl">
				<legend>Desarrollo profesional</legend>

				<div class="employment-wrapper list-wrapper">
					<div class="list-items palette-clouds" ng-show="cvitae.employment.length">
						<div ng-repeat="employment in cvitae.employment" class="list-item">
							<button class="btn btn-danger pull-right close-button" type="button" ng-click="remove(employment.id)"><i class="icon-remove icon-white"></i></button>

							<div class="control-group">
								<label class="control-label" for="employment-company-{{employment.id}}-input">Empresa</label>
								<div class="controls">
									<input type="text" class="input-xxlarge" ng-model="employment.company" id="employment-company-{{employment.id}}-input" required="required">
									<button type="button" class="btn" ng-show="employment.department == null" ng-click="addDepartment(employment)"><i class="icon-plus icon-white"></i> Área</button>
								</div>
							</div>

							<div class="control-group" ng-show="employment.department != null">
								<label class="control-label" for="employment-department-{{employment.id}}-input">Área</label>
								<div class="controls">
									<input type="text" class="input-xxlarge" ng-model="employment.department" id="employment-department-{{employment.id}}-input" placeholder="Departamento, gerencia, jefatura, etc.">
								</div>
							</div>

							<div class="control-group">
								<label class="control-label" for="employment-start-date-{{employment.id}}-input">Periodo</label>
								<div class="controls">
									<input type="text" class="input-small" ng-model="employment.startDate" id="employment-start-date-{{employment.id}}-input" required="required" placeholder="Inicio" pattern="(1|2)[0-9]{3}" title="Año (cuatro dígitos)">
									<button type="button" class="btn" ng-show="employment.endDate == null" ng-click="addEndDate(employment.id)" pattern="(1|2)[0-9]{3}" title="Año (cuatro dígitos)"><i class="icon-plus icon-white"></i> Fin</button>
									<span ng-show="employment.endDate != null">-</span>
									<input type="text" class="input-small" ng-model="employment.endDate" ng-show="employment.endDate != null" placeholder="Fin" pattern="(1|2)[0-9]{3}" title="Año (cuatro dígitos)">

									<label class="checkboxx"><input type="checkbox" ng-model="employment.current"> Actual</label>
								</div>
							</div>

							<div class="control-group">
								<label class="control-label" for="employment-position-{{employment.id}}-input">Puesto</label>
								<div class="controls">
									<input type="text" class="input-xxlarge" ng-model="employment.position" id="employment-position-{{employment.id}}-input" required="required">
								</div>
							</div>

							<div class="control-group">
								<label class="control-label" for="employment-position-{{employment.id}}-input">Descripción</label>
								<div class="controls">
									<textarea class="input-xxlarge" ng-model="employment.description" id="employment-description-{{employment.id}}-input" placeholder="Actividades realizadas, responsabilidades, aportaciones y logros"></textarea>
								</div>
							</div>
						</div>
					</div>

					<button class="btn btn-primary btn-block list-action" ng-class="{'list-empty': !cvitae.employment.length}" type="button" ng-click="add()"><i class="icon-plus icon-white"></i> Empleo</button>
				</div>
			</fieldset>
		</form>

		<div id="preview" class="dialog-closeable" ng-show="!editMode">
			<div class="personal-wrapper">
				<h2>Información <span class="second-part">personal</span></h2>

				<div class="row-fluid">
					<div class="span3 align-right-not-stacked">
						<img class="gravatar" ng-src="{{ cvitae.personal.email | gravtastic }}">
					</div>
					<div class="span9">
						<div class="personal-name-section personal-section"><!-- TODO: add a formatter -->
							<span class="personal-first-name" ng-bind="cvitae.personal.firstName"></span> 
							<span class="personal-last-name" ng-bind="cvitae.personal.lastName"></span>
						</div>

						<div class="personal-address-section personal-section">
							<div class="personal-address" ng-bind="cvitae.personal.address"></div>
							<div class="personal-borough" ng-bind="cvitae.personal.borough.label"></div><!-- TODO: add a formatter -->
							<div class="personal-state" ng-bind="cvitae.personal.state.label"></div>
						</div>

						<div class="personal-contact-section personal-section">
							<div class="personal-email">
								<span class="personal-contact-type">Correo</span>
								<span ng-bind="cvitae.personal.email"></span>
							</div>
							<div ng-repeat="phone in cvitae.personal.phones">
								<span class="personal-contact-type" ng-bind="catalogs.phoneTypes[phone.type].label"></span>
								<a ng-href="tel:{{phone.number}}" ng-bind="phone.number"></a>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="education-wrapper">
				<h2>Formación <span class="second-part">académica</span></h2>

				<div>
					<div class="row-fluid education-section" ng-repeat="education in cvitae.education | orderBy:'startDate':true">
						<div class="span3 align-right-not-stacked">
							<div class="year-interval">{{ education.startDate | interval:education.endDate }}</div>
							<span class="label label-info" ng-show="education.current">Actual</span>
						</div>

						<div class="span9">
							<div ng-bind="education.institution"></div>
							<div ng-bind="education.school"></div>
							<div ng-bind="education.degree"></div>
						</div>
					</div>
				</div>
			</div>

			<div class="employment-wrapper">
				<h2>Desarrollo <span class="second-part">profesional</span></h2>

				<div>
					<div class="row-fluid employment-section" ng-repeat="employment in cvitae.employment | orderBy:'startDate':true">
						<div class="span3 align-right-not-stacked">
							<div class="year-interval">{{ employment.startDate | interval:employment.endDate }}</div>
							<span class="label label-info" ng-show="employment.current">Actual</span>
						</div>

						<div class="span9">
							<div ng-bind="employment.company"></div>
							<div ng-bind="employment.department"></div>
							<div ng-bind="employment.position"></div>
							<div ng-bind-html-unsafe="employment.description | markdown"></div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="error-dialog" class="row-fluid hide">
		<div class="span6 offset3">
			<div id="local-storage-error">
				<div class="dialog palette-clouds">
					<h3>Error: localStorage no soportado.</h3>
					<p>Por el momento, almacenamos los datos de tu <span class="cvitae-brand">cvitae</span> en tu propio navegador. Desafortunadamente, parece que el tuyo no soporta esta característica.</p>
					<p><a href="http://browsehappy.com/?locale=es" target="_blank">¡Obtén un navegador más actualizado aquí!</a></p>

					<button type="button" class="btn btn-primary btn-block" ng-click="closeDialog()">Cerrar</button>
				</div>
			</div>
		</div>
		</div>

		<div id="footer" class="palette-clouds clearfix">
			<p class="pull-left">Generado con <b>cvitae</b>.</p>
			<p class="pull-right"><a>cvitae.com.mx</a></p>
		</div>
	</div>
</body>
</html>